@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;

  /* Font variables are provided by next/font via layout.tsx */
  --font-heading: "";
  --font-body: "";
}

@theme inline {
  /* Colors (fallback tokens; Tailwind config defines palette) */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

/* Base defaults: parchment background, body uses Noto Sans JP; headings use DotGothic16 */
@layer base {
  html, body { @apply bg-parchment text-stone-800 font-body; }
  h1, h2, h3, h4 { @apply font-heading; }
}

/* Utilities: subtle paper texture and pixel-style borders/shadows */
@layer utilities {
  /* Subtle repeating paper texture; add PNG later at /public/ui/paper.png */
  .paper {
    background-color: theme(colors.parchment);
    background-image:
      /* faint noise fallback */
      radial-gradient(rgba(0,0,0,0.03) 1px, transparent 1px),
      url('/ui/wood/paper.png');
    background-size: 16px 16px, 256px 256px;
    background-repeat: repeat, repeat;
    background-blend-mode: multiply;
  }

  .wood-panel {
    background-image: url('/ui/wood/panel.png');
    background-repeat: repeat;
  }

  /* 2px stepped border using box-shadow for a pixel vibe */
  .pixel-border {
    box-shadow:
      0 0 0 2px rgba(0,0,0,0.5),
      4px 0 0 0 rgba(0,0,0,0.35),
      -4px 0 0 0 rgba(0,0,0,0.35),
      0 4px 0 0 rgba(0,0,0,0.35),
      0 -4px 0 0 rgba(0,0,0,0.35);
  }

  /* Hard, crisp drop shadow with stepped offsets */
  .pixel-shadow {
    box-shadow:
      3px 3px 0 0 rgba(0,0,0,0.25),
      6px 6px 0 0 rgba(0,0,0,0.15);
  }

  /* Wiggle animation for notify bell */
  @keyframes wiggle {
    0%, 100% { transform: rotate(0deg); }
    15% { transform: rotate(-8deg); }
    30% { transform: rotate(8deg); }
    45% { transform: rotate(-5deg); }
    60% { transform: rotate(5deg); }
    75% { transform: rotate(-2deg); }
    90% { transform: rotate(2deg); }
  }
  .wiggle {
    animation: wiggle 1s ease-in-out infinite;
    transform-origin: top center;
  }
  /* Pixel frame helper for avatars */
  .pixel-frame {
    image-rendering: pixelated;
    box-shadow:
      0 0 0 2px rgba(0,0,0,0.5),
      2px 2px 0 0 rgba(0,0,0,0.25);
  }
}
